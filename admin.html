<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Cadastro de Personagens</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #0a0a0a;
      color: #f0f0f0;
      margin: 0;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      font-size: 3.5em;
      margin-bottom: 30px;
      color: gold;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
    }

    .card {
      background: #121212;
      border: 2px solid gold;
      border-radius: 12px;
      margin: 15px 0;
      padding: 25px 30px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.15);
    }

    h3 {
      font-size: 1.5em;
      margin-bottom: 20px;
      color: #fff;
      border-bottom: 1px solid gold;
      padding-bottom: 5px;
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: 600;
      font-size: 0.95em;
      color: #e0e0e0;
    }

    input {
      width: 96%; /* Reduzindo a largura dos campos de texto */
      padding: 10px;
      margin-top: 4px;
      border-radius: 6px;
      border: 1px solid #333;
      background-color: #1a1a1a;
      color: #fff;
      font-family: 'Open Sans', sans-serif;
      font-size: 0.95em;
      transition: border 0.3s;
    }

    input:focus {
      border-color: gold;
      outline: none;
    }

    button {
      background-color: #800000;
      color: white;
      border: 2px solid gold;
      border-radius: 6px;
      padding: 12px 30px;
      margin: 30px auto;
      font-family: 'Open Sans', sans-serif;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      display: block;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background-color: #a00000;
      transform: scale(1.03);
    }

    #listaPersonagens {
      max-width: 600px;
      width: 100%;
      margin-top: 40px;
    }

    /* Estilos para o card de personagens */
    .personagem-card {
      background-color: #1c1c1c;
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      border: 2px solid gold;
      display: flex;
      flex-direction: column;
    }

    /* Alinhamento do nome e ID */
    .personagem-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .personagem-info strong {
      color: gold;
      font-size: 1.2em;
    }

    .personagem-info span {
      color: #e0e0e0;
      font-size: 1em;
    }

    /* Botões na horizontal */
    .botoes-horizontal {
      display: flex;
      gap: 15px;
    }

    .botoes-horizontal button {
      padding: 10px 50px;
      font-size: 1em;
      font-weight: normal;
    }
  </style>
</head>
<body>

<h2>Cadastro de Personagens</h2>

<!-- Chave Mestra -->
<div class="card">
  <h3>Autenticação</h3>
  <label>Chave Mestra</label>
  <input type="password" id="chaveMestra" placeholder="Digite a chave mestra" />
  
</div>

<!-- Card 01: ID -->
<div class="card">
  <h3>Identificação do Usuário</h3>
  <label>ID</label>
  <input type="text" id="personagemId" placeholder="Deixar vazio para novo cadastro" />
</div>

<!-- Card 02: Informações Pessoais -->
<div class="card">
  <h3>Informações Pessoais</h3>
  <label>Nome Completo</label><input type="text" id="nomeCompleto" />
  <label>Idade</label><input type="text" id="idade" />
  <label>Reino de Origem</label><input type="text" id="reinoOrigem" />
  <label>Mundo de Origem</label><input type="text" id="mundoOrigem" />
  <label>Reino onde vive Atualmente</label><input type="text" id="reinoAtual" />
</div>

<!-- Card 03: Status Básicos -->
<div class="card">
  <h3>Status Básicos</h3>
  <label>Ameaça</label><input type="text" id="ameaca" />
  <label>Comunicação</label><input type="text" id="comunicacao" />
  <label>Conhecimento</label><input type="text" id="conhecimento" />
  <label>Desafio</label><input type="text" id="desafio" />
  <label>Destruição</label><input type="text" id="destruicao" />
  <label>Importância</label><input type="text" id="importancia" />
  <label>Imortalidade</label><input type="text" id="imortalidade" />
  <label>Influência</label><input type="text" id="influencia" />
  <label>Meritocracia</label><input type="text" id="meritocracia" />
  <label>Nível de XP</label><input type="text" id="xp" />
  <label>Nível de Procurado</label><input type="text" id="procurado" />
  <label>Regeneração</label><input type="text" id="regeneracao" />
  <label>Proficiência</label><input type="text" id="proficiencia" />
</div>

<!-- Card 04: Ranking & Categoria -->
<div class="card">
  <h3>Ranking & Categoria</h3>
  <label>Ranking</label><input type="text" id="ranking" />
  <label>Categoria</label><input type="text" id="categoria" />
</div>

<!-- Card 05: Nível de Poder -->
<div class="card">
  <h3>Nível de Poder</h3>
  <label>Classe</label><input type="text" id="classe" />
  <label>Poder Mágico</label><input type="text" id="magico" />
  <label>Poder Físico</label><input type="text" id="fisico" />
  <label>Poder Espiritual</label><input type="text" id="espiritual" />
  <label>Poder Psíquico</label><input type="text" id="psiquico" />
  <label>Poder Aurático</label><input type="text" id="auratico" />
  <label>Poder Total</label><input type="text" id="total" />
</div>

<!-- Card 06: Resistência -->
<div class="card">
  <h3>Resistência</h3>
  <label>Resistência Mágica</label><input type="text" id="resMagica" />
  <label>Resistência Física</label><input type="text" id="resFisica" />
  <label>Resistência Espiritual</label><input type="text" id="resEspiritual" />
  <label>Resistência Psíquica</label><input type="text" id="resPsiquica" />
  <label>Resistência Aurática</label><input type="text" id="resAuratica" />
  <label>Resistência Total</label><input type="text" id="resTotal" />
</div>

<!-- Card 07: Reputações -->
<div class="card">
  <h3>Reputações</h3>
  <label>Reputação (Hanashi)</label><input type="text" id="repHanashi" />
  <label>Reputação (Multiversal)</label><input type="text" id="repMultiversal" />
</div>

<!-- Card 08: Status Avançados -->
<div class="card">
  <h3>Status Avançados</h3>
  <label>Consciência</label><input type="text" id="consciencia" />
  <label>Desarmonia</label><input type="text" id="desarmonia" />
  <label>Harmonia</label><input type="text" id="harmonia" />
  <label>Energia</label><input type="text" id="energia" />
  <label>Moralidade</label><input type="text" id="moralidade" />
  <label>Natureza</label><input type="text" id="natureza" />
  <label>Percepção</label><input type="text" id="percepcao" />
  <label>Situação</label><input type="text" id="situacao" />
  <label>Temperamento</label><input type="text" id="temperamento" />
  <label>Tempo</label><input type="text" id="tempo" />
  <label>Transformação</label><input type="text" id="transformacao" />
</div>

<!-- Botão final -->
<button onclick="salvarPersonagem()">Salvar Personagem</button>

<!-- Lista de personagens -->
<div id="listaPersonagens"></div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDfapCnziQeZi4lm4C0AuRRccW7HI-3x5c",
    authDomain: "cards-status.firebaseapp.com",
    databaseURL: "https://cards-status-default-rtdb.firebaseio.com",
    projectId: "cards-status",
    storageBucket: "cards-status.appspot.com",
    messagingSenderId: "394581129380",
    appId: "1:394581129380:web:1adf3d61db095aef764e31"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database().ref("personagens");
  const chaveCorreta = "2025";

  function verificarChave() {
    const chave = document.getElementById("chaveMestra").value;
    if (chave !== chaveCorreta) {
      alert("Chave mestra incorreta!");
      return false;
    }
    return true;
  }

  function getValues() {
    const inputs = document.querySelectorAll("input");
    let data = {};
    inputs.forEach(input => data[input.id] = input.value);
    return data;
  }

  function salvarPersonagem() {
    if (!verificarChave()) return;

    const data = getValues();
    const id = data.personagemId || db.push().key;
    db.child(id).set(data).then(() => {
      alert("Personagem salvo!");
      listarPersonagens();
    });
  }

  function listarPersonagens() {
    db.once("value", snapshot => {
      const lista = document.getElementById("listaPersonagens");
      lista.innerHTML = "<h3>Personagens Cadastrados</h3>";
      snapshot.forEach(child => {
        const personagem = child.val();
        lista.innerHTML += `
          <div class="personagem-card">
            <div class="personagem-info">
              <strong>${personagem.nomeCompleto || "Sem nome"}</strong>
              <span>ID: ${child.key}</span>
            </div>
            <div class="botoes-horizontal">
              <button onclick="editar('${child.key}')">Editar</button>
              <button onclick="excluir('${child.key}')">Excluir</button>
            </div>
          </div>
        `;
      });
    });
  }

  function editar(id) {
    if (!verificarChave()) return;

    db.child(id).once("value", snapshot => {
      const data = snapshot.val();
      for (let key in data) {
        if (document.getElementById(key)) {
          document.getElementById(key).value = data[key];
        }
      }
      document.getElementById("personagemId").value = id;
    });
  }

  function excluir(id) {
    if (!verificarChave()) return;

    if (confirm("Tem certeza que deseja excluir este personagem?")) {
      db.child(id).remove().then(() => listarPersonagens());
    }
  }

  listarPersonagens();
</script>

</body>
</html>
